<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntellicareAI | Your SWISS Wellness Companion - My Safe Spaces</title>
    <meta name="description" content="IntellicareAI is your 24/7 AI-powered wellness companion. Get confidential emotional support, stress management tips, and mental health guidance anytime.">
    <meta name="keywords" content="AI wellness companion, mental health chatbot, emotional support AI, stress management, IntellicareAI, My Safe Spaces, student wellness, teacher support">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://static.wixstatic.com/media/56ddd9_33b6f28e550c4d47b5769babe26a08d2~mv2.png">
    
    <!-- Open Graph -->
    <meta property="og:title" content="IntellicareAI | Your SWISS Wellness Companion">
    <meta property="og:description" content="24/7 AI-powered emotional support for students and teachers. Safe, confidential, always available.">
    <meta property="og:image" content="https://static.wixstatic.com/media/56ddd9_33b6f28e550c4d47b5769babe26a08d2~mv2.png">
    <meta property="og:type" content="website">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --navy: #1B3A5F;
            --navy-deep: #0f2744;
            --navy-light: #264a73;
            --orange: #E67E22;
            --orange-light: #f5a54a;
            --orange-glow: rgba(230, 126, 34, 0.15);
            --cream: #FDF8F3;
            --cream-dark: #f5ede3;
            --white: #ffffff;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-400: #adb5bd;
            --gray-600: #6c757d;
            --gray-800: #343a40;
            --success: #27ae60;
            --purple: #8B7FB0;
            --blue: #3498db;
            --font-display: 'Crimson Pro', Georgia, serif;
            --font-body: 'DM Sans', -apple-system, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background: var(--white);
            color: var(--gray-800);
            line-height: 1.7;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Utility Classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 16px 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 2px 20px rgba(27, 58, 95, 0.06);
            transition: all 0.4s ease;
        }

        .nav.scrolled {
            padding: 10px 0;
            box-shadow: 0 2px 40px rgba(27, 58, 95, 0.1);
        }

        .nav-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .nav-logo-img {
            height: 40px;
            width: auto;
            object-fit: contain;
        }

        .nav-logo-text {
            font-family: var(--font-display);
            font-size: 22px;
            font-weight: 700;
            color: var(--navy);
            padding-left: 12px;
            border-left: 2px solid var(--orange);
        }

        .nav-center {
            display: flex;
            align-items: center;
            gap: 8px;
            list-style: none;
        }

        .nav-item {
            position: relative;
        }

        .nav-item > a {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 500;
            color: var(--navy);
            text-decoration: none;
            padding: 10px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-item > a:hover {
            color: var(--orange);
            background: var(--orange-glow);
        }

        .nav-item > a svg {
            width: 14px;
            height: 14px;
            transition: transform 0.3s ease;
        }

        .nav-item:hover > a svg {
            transform: rotate(180deg);
        }

        /* Dropdown Menu */
        .nav-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 220px;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(27, 58, 95, 0.15);
            padding: 12px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
            z-index: 1001;
            border: 1px solid var(--gray-200);
        }

        .nav-item:hover .nav-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .nav-dropdown a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-800);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .nav-dropdown a:hover {
            background: var(--orange-glow);
            color: var(--orange);
        }

        .nav-dropdown-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .nav-dropdown-icon.yellow { background: linear-gradient(135deg, #F4E4A6, #E8D896); }
        .nav-dropdown-icon.pink { background: linear-gradient(135deg, #E8B4C7, #D9A5B8); }
        .nav-dropdown-icon.green { background: linear-gradient(135deg, #7FB069, #6FA059); }
        .nav-dropdown-icon.purple { background: linear-gradient(135deg, #8B7FB0, #7B6FA0); }
        .nav-dropdown-icon.orange { background: var(--orange-glow); }
        .nav-dropdown-icon.blue { background: rgba(52, 152, 219, 0.15); }

        .nav-dropdown-text {
            display: flex;
            flex-direction: column;
        }

        .nav-dropdown-text span {
            font-size: 14px;
            font-weight: 600;
            color: var(--navy);
        }

        .nav-dropdown-text small {
            font-size: 11px;
            color: var(--gray-600);
            font-weight: 400;
        }

        .nav-dropdown a:hover .nav-dropdown-text span {
            color: var(--orange);
        }

        .nav-dropdown-divider {
            height: 1px;
            background: var(--gray-200);
            margin: 8px 0;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .nav-sos {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 10px 18px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
        }

        .nav-sos:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
        }

        .nav-sos svg {
            width: 16px;
            height: 16px;
        }

        .nav-cta {
            background: var(--navy);
            color: white !important;
            padding: 10px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease !important;
        }

        .nav-cta:hover {
            background: var(--navy-deep) !important;
            transform: translateY(-2px);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            z-index: 1002;
        }

        .mobile-menu-btn span {
            display: block;
            width: 24px;
            height: 2px;
            background: var(--navy);
            margin: 5px 0;
            transition: all 0.3s ease;
        }

        .mobile-menu-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* Crisis Helpline Banner */
        .crisis-banner {
            background: linear-gradient(90deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 10px 16px;
            text-align: center;
            font-size: 13px;
            margin-top: 72px;
        }

        .crisis-banner a {
            color: white;
            font-weight: 600;
            text-decoration: underline;
        }

        /* Main Chat Container */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, var(--cream) 0%, var(--white) 50%, var(--cream-dark) 100%);
            position: relative;
            overflow: hidden;
        }

        .main-content::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 80%;
            height: 150%;
            background: radial-gradient(ellipse at center, var(--orange-glow) 0%, transparent 70%);
            pointer-events: none;
        }

        .chat-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            padding: 24px;
            position: relative;
            z-index: 1;
        }

        /* Chat Header */
        .chat-header {
            background: var(--white);
            border-radius: 20px 20px 0 0;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(27, 58, 95, 0.08);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--gray-200);
        }

        .chat-brand {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .chat-logo {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-light) 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(230, 126, 34, 0.3);
        }

        .chat-logo svg {
            width: 32px;
            height: 32px;
            color: white;
        }

        .chat-title {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 700;
            color: var(--navy);
        }

        .chat-subtitle {
            font-size: 13px;
            color: var(--gray-600);
        }

        .chat-actions {
            display: flex;
            gap: 12px;
        }

        .chat-action-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: var(--gray-100);
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--navy);
            transition: all 0.3s ease;
        }

        .chat-action-btn:hover {
            background: var(--orange-glow);
            color: var(--orange);
        }

        .chat-action-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Messages Container */
        .messages-container {
            flex: 1;
            background: var(--white);
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 400px;
            max-height: 500px;
        }

        /* Demo Mode Banner */
        .demo-mode-banner {
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #fef3cd 0%, #fff8e6 100%);
            border: 1px solid #f5c842;
            border-radius: 12px;
            padding: 12px 16px;
            margin: 12px;
            font-size: 13px;
            color: #856404;
        }

        .demo-mode-banner svg {
            flex-shrink: 0;
            color: #f5a623;
        }

        .demo-mode-banner strong {
            color: #7a5a00;
        }

        /* Welcome Section */
        .welcome-section {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: linear-gradient(135deg, var(--orange-glow) 0%, rgba(230, 126, 34, 0.25) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .welcome-icon svg {
            width: 40px;
            height: 40px;
            color: var(--orange);
        }

        .welcome-title {
            font-family: var(--font-display);
            font-size: 28px;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 12px;
        }

        .welcome-text {
            font-size: 16px;
            color: var(--gray-600);
            max-width: 480px;
            margin: 0 auto 32px;
            line-height: 1.7;
        }

        .starter-prompts {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .starter-prompt {
            background: var(--gray-100);
            border: 1px solid var(--gray-200);
            border-radius: 24px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            color: var(--navy);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .starter-prompt:hover {
            background: var(--orange-glow);
            border-color: var(--orange);
            color: var(--orange);
            transform: translateY(-2px);
        }

        /* Message Bubbles */
        .message {
            display: flex;
            gap: 12px;
            max-width: 85%;
        }

        .message.user {
            margin-left: auto;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .message.assistant .message-avatar {
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-light) 100%);
            color: white;
        }

        .message.user .message-avatar {
            background: var(--navy);
            color: white;
        }

        .message-content {
            padding: 16px 20px;
            border-radius: 16px;
            font-size: 15px;
            line-height: 1.6;
        }

        .message.assistant .message-content {
            background: var(--gray-100);
            color: var(--gray-800);
            border-bottom-left-radius: 4px;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 12px 16px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--gray-400);
            border-radius: 50%;
            animation: typing 1.4s ease-in-out infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-8px); }
        }

        /* Suggested Prompts */
        .suggested-prompts {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .suggested-prompt {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 13px;
            color: var(--navy);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggested-prompt:hover {
            background: var(--orange-glow);
            border-color: var(--orange);
            color: var(--orange);
        }

        /* Input Area */
        .input-container {
            background: var(--white);
            border-radius: 0 0 20px 20px;
            padding: 20px 24px;
            border-top: 1px solid var(--gray-200);
            box-shadow: 0 -4px 20px rgba(27, 58, 95, 0.05);
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .input-field {
            flex: 1;
            border: 2px solid var(--gray-200);
            border-radius: 16px;
            padding: 16px 20px;
            font-family: var(--font-body);
            font-size: 15px;
            resize: none;
            outline: none;
            transition: all 0.3s ease;
            min-height: 56px;
            max-height: 150px;
        }

        .input-field:focus {
            border-color: var(--orange);
            box-shadow: 0 0 0 4px var(--orange-glow);
        }

        .input-field::placeholder {
            color: var(--gray-400);
        }

        .send-btn {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-light) 100%);
            border: none;
            border-radius: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(230, 126, 34, 0.3);
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(230, 126, 34, 0.4);
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .send-btn svg {
            width: 24px;
            height: 24px;
        }

        .input-hint {
            text-align: center;
            font-size: 12px;
            color: var(--gray-400);
            margin-top: 12px;
        }

        /* History Panel */
        .history-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: var(--white);
            box-shadow: -10px 0 40px rgba(27, 58, 95, 0.15);
            z-index: 1100;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .history-panel.open {
            right: 0;
        }

        .history-header {
            padding: 24px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-header h3 {
            font-family: var(--font-display);
            font-size: 20px;
            color: var(--navy);
        }

        .history-close {
            width: 36px;
            height: 36px;
            border: none;
            background: var(--gray-100);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-600);
        }

        .history-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .history-item {
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--gray-200);
        }

        .history-item:hover {
            background: var(--orange-glow);
            border-color: var(--orange);
        }

        .history-item-title {
            font-weight: 600;
            color: var(--navy);
            font-size: 14px;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history-item-date {
            font-size: 12px;
            color: var(--gray-600);
        }

        .history-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 1050;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .history-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        /* Footer */
        .footer {
            background: var(--navy-deep);
            padding: 60px 0 0;
        }

        .footer-main {
            display: grid;
            grid-template-columns: 1.5fr 1fr 1fr 1fr;
            gap: 48px;
            padding-bottom: 48px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-brand-col {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .footer-logo-img {
            height: 40px;
            width: auto;
        }

        .footer-description {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.6;
        }

        .footer-email {
            color: var(--orange-light);
            text-decoration: none;
            font-size: 14px;
        }

        .footer-email:hover {
            color: var(--orange);
        }

        .footer-social {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }

        .footer-social a {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }

        .footer-social a:hover {
            background: var(--orange);
            color: white;
        }

        .footer-social svg {
            width: 18px;
            height: 18px;
        }

        .footer-app-badge img {
            height: 40px;
            width: auto;
        }

        .footer-col h4 {
            font-size: 14px;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer-col ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .footer-col a {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-col a:hover {
            color: var(--orange-light);
        }

        .footer-crisis {
            background: rgba(230, 126, 34, 0.15);
            border-radius: 12px;
            padding: 20px;
            margin-top: 24px;
        }

        .footer-crisis h5 {
            font-size: 13px;
            font-weight: 700;
            color: var(--orange-light);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer-crisis p {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
        }

        .footer-newsletter {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 32px;
            margin-top: 48px;
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 32px;
            flex-wrap: wrap;
        }

        .footer-newsletter-text h4 {
            font-size: 18px;
            font-weight: 600;
            color: white;
            margin-bottom: 8px;
        }

        .footer-newsletter-text p {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }

        .footer-newsletter-form {
            display: flex;
            gap: 12px;
        }

        .footer-newsletter-form input {
            padding: 14px 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            min-width: 280px;
        }

        .footer-newsletter-form input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .footer-newsletter-form button {
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-light) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .footer-newsletter-form button:hover {
            transform: translateY(-2px);
        }

        .footer-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 0;
            flex-wrap: wrap;
            gap: 16px;
        }

        .footer-copyright {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-links a {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--orange-light);
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .nav-center {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--white);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 40px rgba(27, 58, 95, 0.15);
                gap: 0;
            }

            .nav-center.active {
                display: flex;
            }

            .nav-item {
                width: 100%;
            }

            .nav-item > a {
                justify-content: space-between;
                padding: 14px 16px;
            }

            .nav-dropdown {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                box-shadow: none;
                border: none;
                padding: 0 0 0 20px;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }

            .nav-item.active .nav-dropdown {
                max-height: 500px;
            }

            .nav-item.active > a svg {
                transform: rotate(180deg);
            }

            .footer-main {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .nav-sos {
                display: none;
            }

            .chat-header {
                padding: 16px;
            }

            .chat-brand {
                gap: 12px;
            }

            .chat-logo {
                width: 44px;
                height: 44px;
                border-radius: 12px;
            }

            .chat-logo svg {
                width: 24px;
                height: 24px;
            }

            .chat-title {
                font-size: 18px;
            }

            .chat-actions {
                gap: 8px;
            }

            .chat-action-btn {
                width: 38px;
                height: 38px;
            }

            .messages-container {
                padding: 16px;
                min-height: 350px;
            }

            .welcome-title {
                font-size: 22px;
            }

            .welcome-text {
                font-size: 14px;
            }

            .starter-prompts {
                flex-direction: column;
            }

            .input-container {
                padding: 16px;
            }

            .input-field {
                padding: 12px 16px;
            }

            .send-btn {
                width: 48px;
                height: 48px;
            }

            .history-panel {
                width: 100%;
                right: -100%;
            }

            .footer-main {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .footer-social {
                justify-content: center;
            }

            .footer-newsletter {
                flex-direction: column;
                text-align: center;
            }

            .footer-newsletter-form {
                flex-direction: column;
                width: 100%;
            }

            .footer-newsletter-form input {
                min-width: 100%;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }

            .footer-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav" id="nav" role="navigation" aria-label="Main navigation">
        <div class="container">
            <div class="nav-inner">
                <a href="https://mysafespaces.org" class="nav-logo">
                    <img src="https://static.wixstatic.com/media/56ddd9_33b6f28e550c4d47b5769babe26a08d2~mv2.png" alt="My Safe Spaces" class="nav-logo-img">
                    <span class="nav-logo-text">My Safe Spaces</span>
                </a>
                
                <ul class="nav-center">
                    <li class="nav-item">
                        <a href="#programs">
                            Programs
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </a>
                        <div class="nav-dropdown">
                            <a href="https://swiss.mysafespaces.org">
                                <div class="nav-dropdown-icon yellow">üè´</div>
                                <div class="nav-dropdown-text">
                                    <span>SWISS</span>
                                    <small>K-12 School Certification</small>
                                </div>
                            </a>
                            <a href="https://swisshighered.mysafespaces.org">
                                <div class="nav-dropdown-icon purple">üéì</div>
                                <div class="nav-dropdown-text">
                                    <span>SWISS HigherED</span>
                                    <small>College & University</small>
                                </div>
                            </a>
                            <a href="https://crew.mysafespaces.org">
                                <div class="nav-dropdown-icon green">üè¢</div>
                                <div class="nav-dropdown-text">
                                    <span>CREW</span>
                                    <small>Workplace Certification</small>
                                </div>
                            </a>
                            <a href="https://elevate.mysafespaces.org">
                                <div class="nav-dropdown-icon orange">‚≠ê</div>
                                <div class="nav-dropdown-text">
                                    <span>ELEVATE</span>
                                    <small>Professional Fellowship</small>
                                </div>
                            </a>
                            <div class="nav-dropdown-divider"></div>
                            <a href="https://mysafespaces.org/counseling">
                                <div class="nav-dropdown-icon pink">üíú</div>
                                <div class="nav-dropdown-text">
                                    <span>Counseling Services</span>
                                    <small>Professional Support</small>
                                </div>
                            </a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#organizations">
                            For Organizations
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </a>
                        <div class="nav-dropdown">
                            <a href="https://education.mysafespaces.org">
                                <div class="nav-dropdown-icon yellow">üè´</div>
                                <div class="nav-dropdown-text">
                                    <span>Education</span>
                                    <small>Schools & Colleges</small>
                                </div>
                            </a>
                            <a href="https://intellicareai.mysafespaces.org">
                                <div class="nav-dropdown-icon pink">üíú</div>
                                <div class="nav-dropdown-text">
                                    <span>Personal</span>
                                    <small>Individual Wellness</small>
                                </div>
                            </a>
                            <a href="https://crew.mysafespaces.org">
                                <div class="nav-dropdown-icon green">üè¢</div>
                                <div class="nav-dropdown-text">
                                    <span>Workplace</span>
                                    <small>Corporate Wellness</small>
                                </div>
                            </a>
                            <a href="https://elevate.mysafespaces.org">
                                <div class="nav-dropdown-icon purple">üéì</div>
                                <div class="nav-dropdown-text">
                                    <span>Professional</span>
                                    <small>MH Professionals</small>
                                </div>
                            </a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#learn">
                            Learn and Grow
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </a>
                        <div class="nav-dropdown">
                            <a href="https://thrive.mysafespaces.org">
                                <div class="nav-dropdown-icon orange">üìö</div>
                                <div class="nav-dropdown-text">
                                    <span>Thrive Academy</span>
                                    <small>Online Learning Platform</small>
                                </div>
                            </a>
                            <a href="https://blog.mysafespaces.org">
                                <div class="nav-dropdown-icon blue">üìù</div>
                                <div class="nav-dropdown-text">
                                    <span>Blog</span>
                                    <small>Articles & Insights</small>
                                </div>
                            </a>
                            <a href="https://mysafespaces.org/webinars-recordings">
                                <div class="nav-dropdown-icon purple">üé•</div>
                                <div class="nav-dropdown-text">
                                    <span>Webinars</span>
                                    <small>Live & Recorded Sessions</small>
                                </div>
                            </a>
                            <a href="https://mysafespaces.org/event-list">
                                <div class="nav-dropdown-icon green">üìÖ</div>
                                <div class="nav-dropdown-text">
                                    <span>Events</span>
                                    <small>Upcoming Programs</small>
                                </div>
                            </a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#about">
                            About Us
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </a>
                        <div class="nav-dropdown">
                            <a href="https://mysafespaces.org/our-story">
                                <div class="nav-dropdown-icon orange">üìñ</div>
                                <div class="nav-dropdown-text">
                                    <span>Our Story</span>
                                    <small>Mission & Vision</small>
                                </div>
                            </a>
                            <a href="https://mysafespaces.org/leadership">
                                <div class="nav-dropdown-icon purple">üë•</div>
                                <div class="nav-dropdown-text">
                                    <span>The Leadership Team</span>
                                    <small>Meet Our Leaders</small>
                                </div>
                            </a>
                            <a href="https://mysafespaces.org/certification-council">
                                <div class="nav-dropdown-icon yellow">üèÜ</div>
                                <div class="nav-dropdown-text">
                                    <span>Certification Council</span>
                                    <small>SWISS Governance</small>
                                </div>
                            </a>
                        </div>
                    </li>
                </ul>
                
                <div class="nav-right">
                    <a href="tel:112" class="nav-sos">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72"/>
                        </svg>
                        Crisis: 112
                    </a>
                    <a href="https://mysafespaces.org/#contact" class="nav-cta">Get Started</a>
                </div>

                <button class="mobile-menu-btn" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Crisis Helpline Banner -->
    <div class="crisis-banner">
        üÜò In Crisis? Call <a href="tel:112">112</a> (Emergency) | iCall: <a href="tel:9152987821">9152987821</a> | Vandrevala Foundation: <a href="tel:18602662345">1860-2662-345</a>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="chat-wrapper">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-brand">
                    <div class="chat-logo">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 14s1.5 2 4 2 4-2 4-2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <circle cx="9" cy="10" r="1" fill="currentColor"/>
                            <circle cx="15" cy="10" r="1" fill="currentColor"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="chat-title">IntellicareAI</h1>
                        <p class="chat-subtitle">SWISS Wellness Companion</p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="chat-action-btn" id="historyBtn" title="View History">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                    </button>
                    <button class="chat-action-btn" id="clearBtn" title="New Conversation">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Messages Container -->
            <div class="messages-container" id="messagesContainer">
                <!-- Demo Mode Banner (shown when no backend configured) -->
                <div class="demo-mode-banner" id="demoModeBanner" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="12"/>
                        <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                    <span><strong>Demo Mode:</strong> Showing sample responses. Connect a backend to enable full AI functionality.</span>
                </div>
                
                <!-- Welcome Section -->
                <div class="welcome-section" id="welcomeSection">
                    <div class="welcome-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                            <circle cx="9" cy="10" r="1" fill="currentColor"/>
                            <circle cx="15" cy="10" r="1" fill="currentColor"/>
                        </svg>
                    </div>
                    <h2 class="welcome-title">Hello, I'm IntellicareAI</h2>
                    <p class="welcome-text">
                        I'm your SWISS Wellness Companion ‚Äî a safe space to talk about your feelings, 
                        concerns, or anything on your mind. How can I support you today?
                    </p>
                    <div class="starter-prompts">
                        <button class="starter-prompt" onclick="sendStarterPrompt('I\'m feeling stressed about exams')">
                            üò∞ Feeling stressed about exams
                        </button>
                        <button class="starter-prompt" onclick="sendStarterPrompt('I want to improve my mental wellbeing')">
                            üå± Want to improve my wellbeing
                        </button>
                        <button class="starter-prompt" onclick="sendStarterPrompt('I need someone to talk to')">
                            üí¨ Just need someone to talk to
                        </button>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea 
                        class="input-field" 
                        id="messageInput" 
                        placeholder="Type your message here..."
                        rows="1"
                    ></textarea>
                    <button class="send-btn" id="sendBtn" title="Send message">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                        </svg>
                    </button>
                </div>
                <p class="input-hint">IntellicareAI is here to support you. For emergencies, please call 112.</p>
            </div>
        </div>
    </main>

    <!-- History Panel -->
    <div class="history-overlay" id="historyOverlay"></div>
    <div class="history-panel" id="historyPanel">
        <div class="history-header">
            <h3>Conversation History</h3>
            <button class="history-close" id="historyClose">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="history-list" id="historyList">
            <!-- History items will be populated here -->
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-main">
                <div class="footer-brand-col">
                    <a href="https://mysafespaces.org">
                        <img src="https://static.wixstatic.com/media/56ddd9_33b6f28e550c4d47b5769babe26a08d2~mv2.png" alt="My Safe Spaces" class="footer-logo-img" style="filter: brightness(0) invert(1);">
                    </a>
                    <p class="footer-description">Supporting mental wellness through compassionate care, innovative AI tools, and certified professionals who truly understand you.</p>
                    <a href="/cdn-cgi/l/email-protection#076e696168476a7e7466616274776664627429687560" class="footer-email"><span class="__cf_email__" data-cfemail="70191e161f301d09031116150300111315035e1f0217">[email&#160;protected]</span></a>
                    <div class="footer-social">
                        <a href="https://www.instagram.com/mysafe_spaces" aria-label="Instagram">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                            </svg>
                        </a>
                        <a href="https://www.facebook.com/mysafe_spaces" aria-label="Facebook">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
                            </svg>
                        </a>
                        <a href="http://www.youtube.com/@MySafeSpaces" aria-label="YouTube">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"/>
                                <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"/>
                            </svg>
                        </a>
                        <a href="https://www.linkedin.com/company/mysafespaces/" aria-label="LinkedIn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                                <rect x="2" y="9" width="4" height="12"/>
                                <circle cx="4" cy="4" r="2"/>
                            </svg>
                        </a>
                        <a href="https://x.com/mysafe_spaces" aria-label="Twitter/X">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
                            </svg>
                        </a>
                    </div>
                    <a href="https://play.google.com/store/apps/details?id=com.mysafespaces" class="footer-app-badge">
                        <img src="https://static.wixstatic.com/media/56ddd9_3d10278451d84745937b171d5287b28d~mv2.png/v1/fill/w_135,h_40,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/GetItOnGooglePlay_Badge_Web_color_English.png" alt="Get it on Google Play">
                    </a>
                </div>

                <div class="footer-col">
                    <h4>Solutions</h4>
                    <ul>
                        <li><a href="https://swiss.mysafespaces.org">Educational Wellness</a></li>
                        <li><a href="https://intellicareai.mysafespaces.org">Personal Empowerment</a></li>
                        <li><a href="https://crew.mysafespaces.org">Workplace Wellness</a></li>
                        <li><a href="https://elevate.mysafespaces.org">Professional Development</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="https://mysafespaces.org/our-story">About Us</a></li>
                        <li><a href="https://mysafespaces.org/leadership">Leadership</a></li>
                        <li><a href="https://mysafespaces.org/careers">Careers</a></li>
                        <li><a href="https://blog.mysafespaces.org">Blog</a></li>
                        <li><a href="https://mysafespaces.org/event-list">Events</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Learn & Grow</h4>
                    <ul>
                        <li><a href="https://thrive.mysafespaces.org">Thrive Academy</a></li>
                        <li><a href="https://mysafespaces.org/webinars-recordings">Webinars</a></li>
                        <li><a href="https://mysafespaces.org/digitalmaze">On Social Media</a></li>
                        <li><a href="https://blog.mysafespaces.org">Blog</a></li>
                    </ul>

                    <div class="footer-crisis">
                        <h5>Crisis Support (India)</h5>
                        <p>112 for unified emergency<br>
                        TeleMANAS: 14416 | 1-800-891-4416</p>
                    </div>
                </div>
            </div>

            <div class="footer-newsletter">
                <div class="footer-newsletter-text">
                    <h4>Subscribe to our newsletter</h4>
                    <p>Stay updated on mental health resources and safety news</p>
                </div>
                <form class="footer-newsletter-form" action="https://mysafespaces.org" method="get">
                    <input type="email" placeholder="Enter your email" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>

            <div class="footer-bottom">
                <div class="footer-copyright">
                    ¬© 2026 NxtGen Technologies LLC. All rights reserved.
                </div>
                <div class="footer-links">
                    <a href="https://mysafespaces.org/privacy-policy">Privacy Policy</a>
                    <a href="https://mysafespaces.org/terms-and-conditions">Terms & Conditions</a>
                    <a href="https://mysafespaces.org/accessibility-statement-1">Accessibility</a>
                </div>
            </div>
        </div>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Navigation scroll effect
        const nav = document.getElementById('nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Mobile menu toggle
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navCenter = document.querySelector('.nav-center');
        
        mobileMenuBtn.addEventListener('click', () => {
            navCenter.classList.toggle('active');
            mobileMenuBtn.classList.toggle('active');
        });

        // Mobile dropdown toggle
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            const link = item.querySelector('a');
            link.addEventListener('click', (e) => {
                if (window.innerWidth <= 992) {
                    e.preventDefault();
                    item.classList.toggle('active');
                    
                    navItems.forEach(otherItem => {
                        if (otherItem !== item) {
                            otherItem.classList.remove('active');
                        }
                    });
                }
            });
        });

        // Chat functionality
        const messagesContainer = document.getElementById('messagesContainer');
        const welcomeSection = document.getElementById('welcomeSection');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const historyBtn = document.getElementById('historyBtn');
        const clearBtn = document.getElementById('clearBtn');
        const historyPanel = document.getElementById('historyPanel');
        const historyOverlay = document.getElementById('historyOverlay');
        const historyClose = document.getElementById('historyClose');
        const historyList = document.getElementById('historyList');

        let conversationHistory = [];
        let allConversations = [];
        let currentConversationId = null;

        // Load from localStorage
        function loadFromStorage() {
            const saved = localStorage.getItem('intellicareai_conversations');
            if (saved) {
                allConversations = JSON.parse(saved);
            }
            createNewConversationId();
        }

        function saveToStorage() {
            localStorage.setItem('intellicareai_conversations', JSON.stringify(allConversations));
        }

        function createNewConversationId() {
            currentConversationId = Date.now().toString();
        }

        // Backend Proxy Configuration
        // Set your backend proxy URL here - this should point to your server that handles API calls securely
        const BACKEND_PROXY_URL = 'https://intellicareai-api.hjerome.workers.dev'; // Cloudflare Worker endpoint
        
        // Demo mode responses when no backend is configured
        const demoResponses = [
            "I hear you, and I want you to know that your feelings are valid. It's completely okay to feel this way. Would you like to tell me more about what's on your mind? I'm here to listen. üíô",
            "Thank you for sharing that with me. Taking the time to talk about how you're feeling is an important step. Remember, you don't have to face everything alone. What would feel most helpful right now?",
            "That sounds challenging, and it takes courage to open up about it. Let's work through this together. What's one small thing that might bring you a bit of comfort today?",
            "I appreciate you trusting me with this. Your wellbeing matters, and I'm glad you're here. Sometimes just acknowledging our feelings can help. How are you feeling right now in this moment?",
            "It's natural to feel overwhelmed sometimes. You're doing the best you can, and that's enough. Would you like to explore some simple breathing exercises together, or would you prefer to just talk?"
        ];

        const systemPrompt = `You are IntellicareAI, the SWISS Wellness Companion ‚Äî an empathetic and supportive AI assistant created by My Safe Spaces. Your role is to provide emotional support and guidance to students and teachers.

Guidelines:
- Be warm, empathetic, and non-judgmental
- Listen actively and validate feelings
- Offer practical coping strategies when appropriate
- Encourage professional help when needed
- Keep responses concise but meaningful (2-4 sentences typically)
- Never diagnose or prescribe medication
- If someone expresses thoughts of self-harm, gently encourage them to reach out to a crisis helpline (112 for emergencies in India, iCall: 9152987821, Vandrevala Foundation: 1860-2662-345)
- Suggest 3 follow-up prompts at the end of each response in a natural way

Remember: You're a supportive companion, not a replacement for professional mental health care.`;

        // Send message
        async function sendMessage(text) {
            if (!text.trim()) return;

            // Hide welcome section
            welcomeSection.style.display = 'none';

            // Add user message
            addMessage(text, 'user');
            conversationHistory.push({ role: 'user', content: text });

            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message assistant';
            typingDiv.innerHTML = `
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            try {
                let assistantMessage;
                
                if (BACKEND_PROXY_URL) {
                    // Use secure backend proxy
                    const response = await fetch(BACKEND_PROXY_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            system: systemPrompt,
                            messages: conversationHistory
                        })
                    });

                    const data = await response.json();
                    typingDiv.remove();

                    if (data.content && data.content[0]) {
                        assistantMessage = data.content[0].text;
                    } else if (data.message) {
                        assistantMessage = data.message;
                    } else {
                        throw new Error('Invalid response');
                    }
                } else {
                    // Demo mode - simulate response delay
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    typingDiv.remove();
                    assistantMessage = demoResponses[Math.floor(Math.random() * demoResponses.length)];
                }
                
                addMessage(assistantMessage, 'assistant');
                conversationHistory.push({ role: 'assistant', content: assistantMessage });
                
                // Save conversation
                saveCurrentConversation();
            } catch (error) {
                typingDiv.remove();
                addMessage("I'm sorry, I'm having trouble connecting right now. Please try again or reach out to a crisis helpline if you need immediate support.", 'assistant');
            }
        }

        function addMessage(text, role) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const avatar = role === 'assistant' ? 'ü§ñ' : 'üë§';
            
            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">${formatMessage(text)}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function formatMessage(text) {
            return text.replace(/\n/g, '<br>');
        }

        function saveCurrentConversation() {
            if (conversationHistory.length === 0) return;

            const existing = allConversations.findIndex(c => c.id === currentConversationId);
            const convo = {
                id: currentConversationId,
                title: conversationHistory[0]?.content.slice(0, 50) + '...',
                messages: [...conversationHistory],
                timestamp: new Date().toISOString()
            };

            if (existing >= 0) {
                allConversations[existing] = convo;
            } else {
                allConversations.unshift(convo);
            }

            // Keep only last 25 conversations
            allConversations = allConversations.slice(0, 25);
            saveToStorage();
        }

        function loadConversation(id) {
            const convo = allConversations.find(c => c.id === id);
            if (convo) {
                currentConversationId = id;
                conversationHistory = [...convo.messages];
                
                // Clear and rebuild messages
                messagesContainer.innerHTML = '';
                welcomeSection.style.display = 'none';
                
                convo.messages.forEach(msg => {
                    addMessage(msg.content, msg.role);
                });

                closeHistory();
            }
        }

        function renderHistory() {
            historyList.innerHTML = '';
            
            if (allConversations.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: var(--gray-600); padding: 20px;">No conversation history yet</p>';
                return;
            }

            allConversations.forEach(convo => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <div class="history-item-title">${convo.title}</div>
                    <div class="history-item-date">${new Date(convo.timestamp).toLocaleDateString()}</div>
                `;
                item.onclick = () => loadConversation(convo.id);
                historyList.appendChild(item);
            });
        }

        function openHistory() {
            renderHistory();
            historyPanel.classList.add('open');
            historyOverlay.classList.add('open');
        }

        function closeHistory() {
            historyPanel.classList.remove('open');
            historyOverlay.classList.remove('open');
        }

        // Event listeners
        sendBtn.addEventListener('click', () => {
            sendMessage(messageInput.value);
            messageInput.value = '';
            messageInput.style.height = 'auto';
        });

        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage(messageInput.value);
                messageInput.value = '';
                messageInput.style.height = 'auto';
            }
        });

        // Auto-resize textarea
        messageInput.addEventListener('input', () => {
            messageInput.style.height = 'auto';
            messageInput.style.height = Math.min(messageInput.scrollHeight, 150) + 'px';
        });

        historyBtn.addEventListener('click', openHistory);
        historyClose.addEventListener('click', closeHistory);
        historyOverlay.addEventListener('click', closeHistory);

        clearBtn.addEventListener('click', () => {
            if (conversationHistory.length === 0 || confirm('Start a new conversation? Your current chat will be saved in history.')) {
                conversationHistory = [];
                createNewConversationId();
                saveToStorage();
                messagesContainer.innerHTML = '';
                
                // Re-add demo banner if in demo mode
                if (!BACKEND_PROXY_URL) {
                    const banner = document.getElementById('demoModeBanner');
                    banner.style.display = 'flex';
                    messagesContainer.appendChild(banner);
                }
                
                welcomeSection.style.display = 'block';
                messagesContainer.appendChild(welcomeSection);
            }
        });

        // Starter prompt function
        function sendStarterPrompt(text) {
            sendMessage(text);
        }

        // Initialize
        loadFromStorage();
        
        // Show demo mode banner if no backend configured
        if (!BACKEND_PROXY_URL) {
            document.getElementById('demoModeBanner').style.display = 'flex';
        }
    </script>
</body>
</html>